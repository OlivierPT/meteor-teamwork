<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../bower_components/core-menu/core-menu.html">
<link rel="import" href="../../bower_components/paper-dropdown/paper-dropdown.html">
<link rel="import" href="../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../bower_components/paper-input/paper-input-decorator.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">


<polymer-element name="tw-list" attributes="listId activityId model">
    <template>
        <style>
            :host {
                display: block;
                position: relative;
                padding-left: 20px;
                width: 264px;
                font-weight: 300;
            }
            
            .list-container {
                background-color: white;
            }
            
            .list-header {
                margin-bottom: 10px;
                padding-top: 5px;
                background-color: #03a9f4;
            }
            polyfill-next-selector { content: '.list-header h3'; }
            .list-header ::content h3 {
                margin: 0;
                font-weight: 300;
            }
        </style>

        <paper-shadow z="1">
            <div class="list-container" layout vertical flex>
                <div class="list-header" layout horizontal center-justified>
                    <div flex style="margin: 10px">
                        <content select="h3"></content>
                    </div>                    
                    <paper-menu-button>
                        <paper-icon-button icon="menu" noink></paper-icon-button>
                        <paper-dropdown class="dropdown">
                            <core-menu class="menu">
                                <paper-item>Settings</paper-item>
                                <paper-item on-click="{{deleteList}}">Delete</paper-item>
                            </core-menu>
                        </paper-dropdown>
                    </paper-menu-button>
                </div>
                <div class="list-body" layout vertical>
                    <content></content>
                </div>
                <div class="list-footer"  layout horizontal>
                    <paper-input-decorator label="New task" flex self-start>
                        <input is="core-input" value="{{newTaskLabel}}" flex>
                    </paper-input-decorator>
                    <core-button noink="" role="button" tabindex="0" on-click="{{addTask}}" self-center>
                        <core-icon icon="add" aria-label="add" role="img"></core-icon>
                    </core-button>
                </div>
            </div>
        </paper-shadow>
        
    </template>
    <script>
        Polymer({
            created: function () {
                // hint that items is an array
                this.model = {};
            },
            deleteList: function() {
                console.log("Fire event delete-list : "+  this.listId + " - activity : "+this.activityId);
                this.fire('delete-list', {listId: this.listId, activityId: this.activityId});
            },
            
            addTask: function() {
                console.log("Fire event add-task : "+  this.listId  + " - activity : "+this.activityId + " - label : "+this.newTaskLabel);
                this.fire('add-task', {listId: this.listId, activityId: this.activityId, taskLabel: this.newTaskLabel});
                this.newTaskLabel = "";
            }
            
        });
    </script>
</polymer-element>
