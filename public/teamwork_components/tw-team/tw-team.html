<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../bower_components/core-menu/core-menu.html">
<link rel="import" href="../../bower_components/paper-dropdown/paper-dropdown.html">
<link rel="import" href="../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog-transition.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-action-dialog.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">


<polymer-element name="tw-team"  attributes="teamId">
    <template>
        <style>
            :host {
                display: block;
                position: relative;    
                font-weight: 300;
                background-color: white;
                width: 100%;
            }

            .team {
                margin: 15px;
                padding-bottom: 50px;
                padding-right: 50px;
            }

            #addMemberBtn {
                position: absolute;
                bottom: 20px;
                right: 20px;
            }
        </style>

        <div class="team" layout vertical>
            <div layout horizontal left>                
                <span flex>
                    <h2>Team Management</h2>
                </span>
                <paper-menu-button>
                    <paper-icon-button icon="menu" noink></paper-icon-button>
                    <paper-dropdown class="dropdown">
                        <core-menu class="menu">
                            <paper-item>Settings</paper-item>
                            <paper-item on-click="{{deleteTeam}}">Delete</paper-item>
                        </core-menu>
                    </paper-dropdown>
                </paper-menu-button>
            </div>
            <div>
                <content></content>
            </div>
            <paper-fab id="addMemberBtn" icon="add" class="blue" title="create" on-click="{{openAddMemberDialog}}"></paper-fab>
        </div>

        <paper-action-dialog transition="core-transition-fade" heading="Add a member" id="addMemberDialog">
            <p>
            <paper-input-decorator label="Member username" error="We need username!"
                                   floatingLabel class="input-light">
                <input is="core-input" id="username" type="text" value="{{newUsername}}" required>
            </paper-input-decorator>
            </p>
            <paper-button dismissive>Cancel</paper-button>
            <paper-button affirmative autofocus on-click="{{addMember}}">Add</paper-button>
        </paper-action-dialog>
    </template>
    <script>
        Polymer({
            deleteTeam: function () {
                console.log("Fire event delete-team : " + this.teamId);
                this.fire('delete-team', {teamId: this.teamId});
            },
            openAddMemberDialog: function () {
                console.log("Click on Add member Button.");
                this.$.addMemberDialog.toggle();
            },
            addMember: function () {
                console.log("Fire event add-member : " + this.model.teamId + " - username : " + this.username);
                this.fire('add-member', {teamId: this.model.teamId, username: this.username});
                this.username = "";
            }
        });
    </script>
</polymer-element>
