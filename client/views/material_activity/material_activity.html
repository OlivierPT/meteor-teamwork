<template name="MaterialActivity">
    <div class="content">
        <tw-activity activityId="{{_id}}">
            <h2>{{name}}</h2>
            <h3>{{description}}</h3>
            <event-form-container class="main-form">
                <event-form objectId="{{_id}}">
                    <paper-input-decorator label="Activity's label" error="We need a label"
                                           floatingLabel>
                        <input is="core-input" name="name" id="activityName" type="text" value="{{name}}" required>
                    </paper-input-decorator>

                    <paper-input-decorator label="Activity's description"
                                           floatingLabel>
                        <paper-autogrow-textarea id="autogrow-description">
                            <textarea id="activityDescription" name="description">{{description}}</textarea>
                        </paper-autogrow-textarea>
                    </paper-input-decorator>


                </event-form>
                <event-paper-button raised affirmative eventName="save-activity" style="background: blue; color: white;">
                    <core-icon icon="check"></core-icon>
                    Save
                </event-paper-button>
            </event-form-container>
            {{#each lists}}
            <tw-list listId="{{id}}" activityId="{{../_id}}" model="">
                <h3>{{label}}</h3>
                {{#each tasks}}
                <tw-task taskId="{{id}}" listId="{{../id}}" activityId="{{../../_id}}"
                         hasDetails="{{taskHasDetail}}" hasComments="{{taskHasComments}}" isAssigned="{{taskIsAssigned}}"
                         hasDueDate="{{taskHasDueDate}}" hasCategory="{{taskHasCategory}}">
                    <span task-label>{{label}}</span>
                    <event-form-container>
                        <event-form objectId="{{id}}">                     
                            <paper-input-decorator label="Task label" error="We need label!"
                                                   floatingLabel class="input-light" required>
                                <input is="core-input" id="taskLabel" name="label" type="text" value="{{label}}" required>
                            </paper-input-decorator>
                            <paper-input-decorator label="Task's description"
                                                   floatingLabel>
                                <paper-autogrow-textarea id="autogrow-description">
                                    <textarea id="description" name="detail">{{detail}}</textarea>
                                </paper-autogrow-textarea>
                            </paper-input-decorator>
                            <div layout verticale start style="padding-top: 7px;">
                                <div>Value</div>
                                <paper-slider pin value="{{value}}" max="100" editable style="width:100%" name="value"></paper-slider>
                            </div>
                            <div layout verticale start>
                                <div>Complexity</div>
                                <paper-slider pin value="{{complexity}}" max="30" editable style="width:100%" name="complexity"></paper-slider>
                            </div>
                            <div layout horizontal>
                                <paper-input-decorator label="Add a comment"
                                                       floatingLabel class="input-light" flex>
                                    <input is="core-input" id="addComment" name="comment" type="text">
                                </paper-input-decorator>           
                                <event-paper-button id="add-state-btn" eventName="pre-add-comment" target="addComment">Add</event-paper-button>
                            </div>
                            <div layout vertical>
                                {{#each comments}}
                                <div>
                                    <span>{{content}}</span>
                                    <span>{{author}}</span>
                                    <span>{{dateCreate}}</span>
                                </div>
                                {{/each}}
                            </div>
                        </event-form>
                        <event-paper-button dismissive eventName="cancel-edit">Cancel</event-paper-button>
                        <event-paper-button affirmative autofocus id="add-state-btn" eventName="pre-save-task" raise>Update</event-paper-button>
                    </event-form-container>
                </tw-task>                            
                {{/each}}
            </tw-list>
            {{/each}}
        </tw-activity>
    </div>
</template>